# =============================================================================
# Retail Monitor Backend - Environment Variables
# =============================================================================
# Copy this file to .env for local development
# For Railway deployment, set these in the Railway dashboard

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# Local Docker Compose:
POSTGRES_USER=retail_monitor
POSTGRES_PASSWORD=change_me_in_production
POSTGRES_DB=retail_monitor
DATABASE_URL=postgresql://retail_monitor:change_me_in_production@db:5432/retail_monitor

# Railway: Use the DATABASE_URL provided by Railway PostgreSQL plugin

# -----------------------------------------------------------------------------
# Redis / Celery
# -----------------------------------------------------------------------------
# Local Docker Compose:
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# Railway: Use the REDIS_URL provided by Railway Redis plugin

# -----------------------------------------------------------------------------
# Django Core
# -----------------------------------------------------------------------------
# Generate secret key: python -c "import secrets; print(secrets.token_urlsafe(50))"
DJANGO_SECRET_KEY=change-me-generate-with-openssl-rand-base64-50
DJANGO_DEBUG=true

# Allowed hosts (comma-separated)
# Local: localhost,127.0.0.1
# Railway: your-app.up.railway.app
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1

# -----------------------------------------------------------------------------
# Frontend Integration (Vercel)
# -----------------------------------------------------------------------------
# URL of the Vercel frontend deployment
FRONTEND_URL=http://localhost:3000

# UI Mode: 'api-only' (production) or 'django' (local dev with templates)
UI_MODE=django

# CORS: Origins allowed to make API requests (comma-separated)
# Include your Vercel deployment URL
CORS_ALLOWED_ORIGINS=http://localhost:3000

# CSRF: Trusted origins for form submissions (comma-separated)
# Must include https:// prefix for production URLs
CSRF_TRUSTED_ORIGINS=http://localhost:3000

# -----------------------------------------------------------------------------
# Security / Encryption
# -----------------------------------------------------------------------------
# Fernet key for encrypting retailer session data
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=change-me-generate-fernet-key

# -----------------------------------------------------------------------------
# External Services
# -----------------------------------------------------------------------------
# OpenAI (for review analysis)
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_MODEL=gpt-4o-mini

# Telegram notifications
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=-1001234567890

# Sentry (optional - error tracking)
SENTRY_DSN=

# -----------------------------------------------------------------------------
# Scraping Settings
# -----------------------------------------------------------------------------
SCRAPE_RATE_LIMIT_RPM=10
SCRAPE_DEFAULT_TIMEOUT=30000

# -----------------------------------------------------------------------------
# Timezone
# -----------------------------------------------------------------------------
TZ=Europe/Moscow

# =============================================================================
# Railway Production Example
# =============================================================================
# DATABASE_URL=<from Railway PostgreSQL plugin>
# REDIS_URL=<from Railway Redis plugin>
# CELERY_BROKER_URL=<same as REDIS_URL>
# CELERY_RESULT_BACKEND=<same as REDIS_URL>
# DJANGO_SECRET_KEY=<generate secure key>
# DJANGO_DEBUG=false
# DJANGO_ALLOWED_HOSTS=web-production-9f63.up.railway.app
# FRONTEND_URL=https://your-app.vercel.app
# UI_MODE=api-only
# CORS_ALLOWED_ORIGINS=https://your-app.vercel.app
# CSRF_TRUSTED_ORIGINS=https://web-production-9f63.up.railway.app,https://your-app.vercel.app
